---
syntax: bash
tags: [ bitcoin ]
---

# Address types

## Mainnet
P2PKH: 1
P2SH/Wrapped-Segwit: 3
Bech32/Native-Segwit: bc1q
Bech32m/Taproot: bc1p

## Testnet
P2PKH: n
P2SH/Wrapped-Segwit: 2
Bech32/Native-Segwit: tb1q
Bech32m/Taproot: tb1p

## Regtest
P2PKH: m
P2SH/Wrapped-Segwit: 2
Bech32/Native-Segwit: bcrt
Bech32m/Taproot: TODO

# Script

## Flow
The unlocking script (scriptSig) will be executed first. Then the locking script (scriptPubKey) will be executed.
<UNLOCKING SCRIPT> <LOCKING SCRIPT>

The script is valid if a non-zero number is on top of the stack.
The script is invalid if 0 is left on top of the stack or the stack is empty.

## Standard locking-scripts
P2PK: <PUBKEY> OP_CHECKSIG
P2PKH: OP_DUP OP_HASH160 <PUBKEYHASH> OP_EQUALVERIFY OP_CHECKSIG
P2MS: <M> <PUBKEY>... <N> CHECKMULTISIG (m of n)
P2SH: OP_HASH160 <SCRIPTHASH> OP_EQUAL
P2WPKH: TODO
P2WSH: TODO
P2TR: TODO
NULLDATA: OP_RETURN <DATA>

## Operators

### Stack
OP_DUP
OP_IFDUP
OP_DROP
OP_PICK

### Bitwise Logic
OP_AND
OP_OR
OP_XOR
OP_EQUAL
OP_EQUALVERIFY

### Flow control
OP_IF
OP_ELSE
OP_ENDIF
OP_VERIFY
OP_RETURN

### Locktime
OP_CHECKLOCKTIMEVERIFY
OP_CHECKSEQUENCEVERIFY

### Crypto
OP_RIPEMD160
OP_SHA256
OP_HASH160
OP_HASH256
OP_CHECKSIG
OP_CHECKSIGVERIFY
OP_CHECKMULTISIG
OP_CHECKMULTISIGVERIFY

## Links
https://en.bitcoin.it/wiki/Transaction
https://en.bitcoin.it/wiki/Script
https://en.bitcoin.it/wiki/OP_CHECKSIG
https://learnmeabitcoin.com/technical/script

# Keys

# Addresses

# Mining

# Timelocks

# Units

## Size in bytes
The size in [bytes] of a transaction refers to the raw byte length of its serialized format. 
It is used to measure the data footprint of transactions when relayed on the network or stored on disk.

## Size in vbytes
The vsize in [vbytes] refers to a transaction's weighted size under segwit's rules. 
It is used to compare how much blockweight needs to be allocated to confirm a transaction.

vsize [vB] = weight [wu] / 4

## Weight
The transaction size was measured in bytes before segwit. Since segwit, the relevant measure is transaction weight 
which is either given in virtualbytes (vbyte, vB) or weight units (wu) where 4 wu = 1 vB.
For segwit transactions, which do include witness data, the resulting transaction weight is strictly smaller than 4 Ã— size due to the witness bytes contributing at a lower factor. 
For non-segwit transactions, their size is equal to their virtualsize 1 B = 1 vB.

## Links
https://bitcoin.stackexchange.com/questions/89385/is-there-a-difference-between-bytes-and-virtual-bytes-vbytes
https://bitcoin.stackexchange.com/questions/84004/how-do-virtual-size-stripped-size-and-raw-size-compare-between-legacy-address-f/84006#84006
